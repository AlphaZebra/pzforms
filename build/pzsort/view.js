document.addEventListener("DOMContentLoaded",(function(){function e(e){let t=Array.from(e.target.parentNode.children).indexOf(e.target);e.dataTransfer.setData("text/plain",t)}function t(e){r(e);let t=parseInt(e.dataTransfer.getData("text/plain")),n=document.querySelectorAll("#items-list > li")[t];n.parentNode.removeChild(n),e.offsetY<e.target.offsetHeight/2?e.target.parentNode.insertBefore(n,e.target):e.target.parentNode.insertBefore(n,e.target.nextSibling)}function r(e){return e.preventDefault(),e.stopPropagation(),!1}document.querySelectorAll("#items-list > li").forEach((n=>{n.draggable=!0,n.addEventListener("dragstart",e),n.addEventListener("drop",t),n.addEventListener("dragenter",r),n.addEventListener("dragover",r)}));const n=document.querySelector('form:has(input[name="formName"])'),a=document.querySelector("#items-list"),o=a.dataset.slug||"sorted_items";n?n.addEventListener("submit",(function(e){e.preventDefault();const t=Array.from(a.children).map((e=>e.textContent.trim().replace(/\\/g,"\\\\").replace(/"/g,'\\"'))),r=document.createElement("input");r.type="hidden",r.name=o,r.value=JSON.stringify(t);const d=n.querySelector(`input[name="${o}"]`);d&&d.remove(),n.appendChild(r),n.submit()})):console.error("Form not found!")}));